# Golang

[Технологический радар](https://magnit-tech.github.io/magnit-online/tech/radar/golang/index.html)

Мы разрабатываем высоконагруженные сервисы для продуктовых магазинов, доставки еды, маркетплейсов и других направлений, используя Golang как один из ключевых языков программирования. Наш подход основан на автоматизации, стандартизации и современных технологиях, что позволяет инженерам сосредоточиться на создании бизнес-ценности.

## Версия Golang

Мы используем актуальную стабильную версию Golang. Все внутренние инструменты поддерживают текущую и предыдущую версии языка, чтобы внедрять новшества, сохраняя стабильность.

## CI/CD и автоматизация

- **Полная автоматизация:** Деплой, тестирование и обновление сервисов полностью автоматизированы.
- **Шаблоны микросервисов:** Каждый новый микросервис создается с готовой базовой инфраструктурой: мониторинг, логирование, трейсинг и другие элементы.
- **GitLab:** Используем self-hosted GitLab Premium для управления репозиториями и CI/CD.

## Observability: Логирование, метрики и трейсинг

- **Логирование:** Унифицированное структурное логирование (JSON), агрегация через Loki и доступ через Grafana.
- **Метрики:** В сервисах используется OpenTelemetry SDK для работы с метриками. Метрики экспортируются в формате Prometheus и собираются для анализа и визуализации в Grafana.
- **Трейсинг:** С помощью OpenTelemetry, Tempo и Uptrace мы обеспечиваем полный контроль над производительностью и поведением сервисов.

## Межсервисное взаимодействие

- **gRPC:** Основной протокол для взаимодействия между микросервисами.
- **HTTP:** Используется для внешних API и шлюзов, с автогенерацией серверов на основе Echo.
- **Specification-first:** Используем OpenAPI для описания API, что позволяет генерировать серверы, клиенты и документацию из единого источника.

## Кодогенерация

Автоматизация рутинных задач охватывает:
- HTTP-серверы и клиенты
- gRPC-серверы и клиенты
- Kafka-продюсеров и консьюмеров

Сгенерированные модули сразу включают инструменты для мониторинга, трейсинга и логирования, упрощая разработку и поддерживая стандарты компании.

## Работа с базами данных

- **PostgreSQL:** Для взаимодействия с базами данных мы используем pgx, избегая использования ORM. Это обеспечивает высокую производительность и гибкость в работе с SQL.
- **Поддержка DBA:** У нас есть команда опытных DBA-инженеров, которые:
  - Обеспечивают стабильность и производительность баз данных.
  - Консультируют команды разработки по лучшим практикам написания сложных SQL-запросов.
  - Помогают в сложных сценариях работы с базами, включая оптимизацию запросов и проектирование структур данных.

## Тестирование

- **Автотесты:** Пишутся как на Golang, так и на Python силами QA-инженеров.
- **Тестовая инфраструктура:** Используем self-hosted Allure TestOps для управления тестами и анализа результатов.
- **Поддержка качества:** Тестирование интегрировано в процесс разработки, обеспечивая стабильность и надежность сервисов.

## Преимущества работы у нас

- **Фокус на бизнес-логике:** Инженеры работают с понятными, унифицированными инструментами, не отвлекаясь на рутину.
- **Современные технологии:** Мы активно внедряем новые подходы и обновляем стек.
- **Стабильность:** Унификация и автоматизация минимизируют вероятность ошибок и упрощают поддержку.
- **Масштабируемость:** Прозрачная и гибкая архитектура позволяет создавать продукты, которые растут вместе с бизнесом.
